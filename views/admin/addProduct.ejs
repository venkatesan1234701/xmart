<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    /* ---- Universal Modal Overlay ---- */
#addProductModal {
  backdrop-filter: blur(4px);
  animation: fadeIn 0.3s ease;
}

/* ---- Modal Box ---- */
#addProductModal > div {
  border-radius: 14px !important;
  padding: 22px !important;
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.18);
  border: 1px solid #e5e7eb;
}

/* ---- Title ---- */
#modalTitle {
  font-size: 1.25rem;
  font-weight: 700;
  color: #111827;
  margin-bottom: 1rem;
}

/* ---- Labels ---- */
#productForm label {
  color: #374151;
  font-weight: 600;
  margin-bottom: 4px;
}

/* ---- Inputs, Selects, Textareas ---- */
#productForm input,
#productForm select,
#productForm textarea {
  border: 1px solid #cbd5e1;
  border-radius: 8px;
  padding: 8px 10px;
  font-size: 0.9rem;
  transition: 0.2s ease;
}

#productForm input:focus,
#productForm select:focus,
#productForm textarea:focus {
  border-color: #22c55e !important;
  box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.3);
  outline: none;
}

/* ---- Image Upload Box ---- */
.imageInput {
  cursor: pointer;
}

#addProductModal label {
  border-color: #9ca3af;
}

#addProductModal label:hover {
  border-color: #22c55e;
}

/* ---- Image Preview ---- */
#addProductModal img {
  border-radius: 8px;
  object-fit: cover;
}

/* ---- Remove Image Button ---- */
.removeX {
  background: #ef4444 !important;
  font-size: 12px !important;
}

/* ---- Error Message ---- */
#errorMsg {
  font-size: 0.85rem;
  font-weight: 600;
}

/* ---- Buttons ---- */
#closeModal {
  background: #e5e7eb;
  color: #374151;
  font-weight: 600;
  border-radius: 8px;
  transition: 0.2s;
}

#closeModal:hover {
  background: #d1d5db;
}

#saveBtn {
  background: #22c55e;
  color: white;
  font-weight: 600;
  border-radius: 8px;
  transition: 0.2s;
}

#saveBtn:hover {
  background: #16a34a;
  transform: translateY(-2px);
}

/* ---- Animation ---- */
@keyframes fadeIn {
  from { opacity: 0; transform: scale(0.97); }
  to { opacity: 1; transform: scale(1); }
}

  </style>
</head>
<body>
  
<div id="addProductModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-start justify-center pt-32">
  <div class="bg-white rounded-lg shadow-md w-full max-w-lg p-6 max-h-[90vh] flex flex-col overflow-hidden">
    <div class="overflow-y-auto">
      <h2 id="modalTitle" class="text-lg font-bold mb-4">Add Product</h2>
      <form id="productForm" action="/admin/add-product" method="POST" enctype="multipart/form-data" class="space-y-3">
        <!-- Category + Name + Size -->
        <div class="flex gap-2 mb-3">
          <div class="flex-1">
            <label class="block text-sm font-medium mb-1">Category</label>
            <select id="category" name="category" class="w-full border rounded px-3 py-2 text-sm">
              <option value="">-- Select Category --</option>
              <% categories.forEach(cat => { %>
                <option value="<%= cat._id %>"><%= cat.name %></option>
              <% }) %>
            </select>
          </div>
          <div class="flex-1">
            <label class="block text-sm font-medium mb-1">Product Name</label>
            <input id="productName" name="name" type="text" class="w-full border rounded px-3 py-2 text-sm" placeholder="Enter product name">
          </div>
          <div class="flex-1">
            <label class="block text-sm font-medium mb-1">Size</label>
            <input id="size" name="size" type="text" class="w-full border rounded px-3 py-2 text-sm" placeholder="Size (M,L,XL)">
          </div>
        </div>

        <!-- Price, Quantity, Weight -->
        <div class="flex gap-2 mb-3">
          <div class="flex-1">
            <label class="block text-sm font-medium mb-1">Price</label>
            <input id="price" name="price" type="number" class="w-full border rounded px-3 py-2 text-sm" placeholder="Price">
          </div>
          <div class="flex-1">
            <label class="block text-sm font-medium mb-1">Quantity</label>
            <input id="quantity" name="quantity" type="number" class="w-full border rounded px-3 py-2 text-sm" placeholder="Qty">
          </div>

        </div>

        <!-- Description -->
        <div>
          <label class="block text-sm font-medium mb-1">Description</label>
          <textarea id="description" name="description" class="w-full border rounded px-3 py-2 text-sm" placeholder="Enter product description" rows="3"></textarea>
        </div>

        <!-- Upload Images -->
   <div class="flex gap-3 items-end mb-3">
  <% for(let i=0;i<3;i++){ %>
    <div class="relative w-20 h-20">
      <label class="w-full h-full flex items-center justify-center border-2 border-dashed rounded cursor-pointer overflow-hidden relative">
        <span class="text-green-500 text-2xl absolute inset-0 flex items-center justify-center pointer-events-none" id="plus<%= i %>">+</span>
        <img id="preview<%= i %>" class="rounded object-cover border hidden absolute inset-0 w-full h-full">
        <span class="removeX hidden absolute top-1 right-1 text-white bg-red-600 rounded-full w-4 h-4 text-xs flex items-center justify-center cursor-pointer pointer-events-auto" data-preview="preview<%= i %>">Ã—</span>
        <input type="file" name="image<%= i %>" class="absolute inset-0 w-full h-full opacity-0 cursor-pointer imageInput" data-preview="preview<%= i %>" accept="image/*">
      </label>
    </div>
  <% } %>
</div>


        <p id="errorMsg" class="text-red-500 text-sm mb-2 hidden"></p>

        <div class="flex justify-end gap-2 mt-2">
          <button type="button" id="closeModal" class="px-3 py-2 rounded bg-gray-200 hover:bg-gray-300">Cancel</button>
          <button type="submit" class="px-3 py-2 rounded bg-green-600 text-white hover:bg-green-700" id="saveBtn">Save</button>
        </div>
      </form>
    </div>
  </div>
</div>

</body>
</html>
