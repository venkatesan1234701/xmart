<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>My Wishlist ‚ù§Ô∏è</title>

    <!-- ‚úÖ Latest Bootstrap 5 CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
	<link rel="stylesheet" href="../assets/css/theme.min.css">



<!-- <style>
	.pagination .page-item.active .page-link {
  background-color: #0d6efd;
  border-color: #0d6efd;
  color: #fff;
}

.pagination .page-link {
  color: #0d6efd;
}

.pagination .page-item.disabled .page-link {
  color: #aaa;
  background-color: #f8f9fa;
}

	/* Wishlist button styling */
  .btn-outline-primary {
    border: 1.8px solid #007bff !important;
    color: #007bff !important;
    font-weight: 500;
    padding: 6px 12px;
    transition: all 0.25s ease-in-out;
    background-color: white !important;
  }

  .btn-outline-primary:hover {
    background-color: #007bff !important;
    color: white !important;
    box-shadow: 0 2px 8px rgba(0, 123, 255, 0.3);
  }

  /* Ensure both buttons have space */
  .move-to-cart-btn,
  .btn-outline-primary {
    min-width: 130px;
    margin: 3px 0;
  }

  /* Align them side by side */
  td .d-flex {
    justify-content: center;
    gap: 8px;
    flex-wrap: wrap;
  }
	  .wishlist-product-img {
    border-radius: 8px;
    transition: transform 0.2s ease;
  }

  .wishlist-product-img:hover {
    transform: scale(1.02);
  }

  .move-to-cart-btn,
  .btn-outline-primary {
    width: 120px;
  }

  .delete-wishlist-btn {
    min-width: 90px;
  }
	  .wishlist-product-img {
    border-radius: 8px;
    transition: transform 0.2s ease;
  }

  .wishlist-product-img:hover {
    transform: scale(1.03);
  }

 .delete-wishlist-btn {
    background-color: #dc3545 !important; /* Bootstrap red */
    color: #fff !important;
    border: none;
    font-weight: 500;
    letter-spacing: 0.3px;
    transition: all 0.2s ease-in-out;
    box-shadow: 0 2px 5px rgba(220, 53, 69, 0.3);
  }

  .delete-wishlist-btn:hover {
    background-color: #bb2d3b !important; /* darker red on hover */
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(187, 45, 59, 0.4);
  }

  .delete-wishlist-btn:active {
    transform: translateY(0);
    box-shadow: 0 1px 3px rgba(187, 45, 59, 0.3);
  }

  /* Make sure buttons are always visible in tables */
  table td .btn {
    visibility: visible !important;
    opacity: 1 !important;
  }




  .move-to-cart-btn {
    background-color: #28a745 !important; /* Bright green */
    color: #fff !important;
    border: none;
    font-weight: 500;
    letter-spacing: 0.3px;
    transition: all 0.2s ease-in-out;
    box-shadow: 0 2px 5px rgba(40, 167, 69, 0.3);
  }

  .move-to-cart-btn:hover {
    background-color: #218838 !important; /* Darker green */
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(33, 136, 56, 0.4);
  }

  .move-to-cart-btn:active {
    transform: translateY(0);
    box-shadow: 0 1px 3px rgba(33, 136, 56, 0.3);
  }
</style> -->




<style>

/* ================================
   GLOBAL POLISH
================================ */
body {
  background: #f8fafc;
  font-family: "Inter", sans-serif;
}

/* Card Shadow Smooth */
.card {
  border-radius: 14px;
  box-shadow: 0 4px 16px rgba(0,0,0,0.08);
  border: none !important;
}

/* ================================
   TABLE DESIGN (Wishlist)
================================ */
.table {
  border-radius: 14px;
  overflow: hidden;
}

.table thead {
  background: #eef6ff;
}

.table thead th {
  font-weight: 600;
  font-size: 15px;
  color: #1f2937;
}

.table tbody tr {
  transition: 0.2s ease-in-out;
}

.table tbody tr:hover {
  background: #f1f5ff;
  transform: scale(1.01);
}


/* PRODUCT IMAGE */
.wishlist-product-img {
  border-radius: 12px;
  transition: 0.25s ease;
}

.wishlist-product-img:hover {
  transform: scale(1.04);
}


/* PRODUCT NAME */
td span.fw-semibold {
  font-size: 15px;
}

/* PRICE STYLE */
td.fw-semibold {
  font-size: 16px;
  color: #047857;
  font-weight: 700 !important;
}

/* SIZE BADGE */
.badge.bg-secondary {
  padding: 6px 10px;
  font-size: 13px;
  border-radius: 8px;
}


/* ================================
   BUTTONS (Move to Cart / View Product)
================================ */

.move-to-cart-btn {
  background: #22c55e !important;
  border: none;
  font-weight: 600;
  width: 140px;
  padding: 8px 12px;
  border-radius: 10px;
  transition: 0.25s ease;
}

.move-to-cart-btn:hover {
  background: #16a34a !important;
  transform: translateY(-2px);
  box-shadow: 0 4px 10px rgba(22,163,74,0.4);
}

.btn-outline-primary {
  border-radius: 10px;
  border-width: 2px;
  font-weight: 600;
  width: 140px;
}

.btn-outline-primary:hover {
  transform: translateY(-2px);
}


/* DELETE BUTTON */
.delete-wishlist-btn {
  background: #ef4444 !important;
  color: white !important;
  padding: 8px 12px;
  width: 95px;
  border-radius: 10px !important;
  transition: 0.25s ease;
}

.delete-wishlist-btn:hover {
  background: #dc2626 !important;
  transform: translateY(-2px);
  box-shadow: 0 4px 10px rgba(220,38,38,0.4);
}


/* ================================
   EMPTY WISHLIST CARD
================================ */
.card-empty {
  padding: 50px;
  border-radius: 16px;
  animation: fadeIn 0.4s ease-in-out;
}

.card-empty i {
  font-size: 3.5rem;
  color: #ef4444;
}

/* Animation */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(15px); }
  to { opacity: 1; transform: translateY(0); }
}

/* ================================
   PAGINATION UPGRADE
================================ */

.pagination .page-item .page-link {
  border-radius: 10px;
  padding: 8px 14px;
  border: none;
  color: #2563eb;
  font-weight: 600;
}

.pagination .page-item.active .page-link {
  background-color: #2563eb;
  color: white;
  box-shadow: 0 4px 10px rgba(37,99,235,0.3);
}

.pagination .page-item .page-link:hover {
  background: #dbeafe;
}

.pagination .page-item.disabled .page-link {
  background: #f3f4f6;
  color: #9ca3af;
}


/* ================================
   SEARCH BAR STYLING
================================ */
#searchProducts {
  border-radius: 12px;
  border: 2px solid #d4d4d8;
  padding: 10px 14px;
}

#searchProducts:focus {
  border-color: #22c55e;
  box-shadow: 0 0 0 4px rgba(34,197,94,0.25);
}

/* SEARCH RESULT DROPDOWN */
#searchResults {
  border-radius: 10px;
  box-shadow: 0 5px 18px rgba(0,0,0,0.15);
}

#searchBtn {
  border-radius: 10px;
}

</style>




  </head>

  <body >


	<header>
	<!-- navbar -->
	<div class="border-b">
		
		<div class="pt-5">
			<div class="container">
				<div class="flex flex-wrap w-full items-center justify-between">
					<div class="lg:w-1/6 md:w-1/2 w-2/5">
						<a class="navbar-brand" href="index.html">
							<img src="../assets/images/logo/Xe mart.png" alt="TailwindCSS eCommerce HTML Template" />
						</a>
					</div>
					<div class="lg:w-2/5 hidden lg:block">
						<form action="#">
						<div class="mb-4">



<div class="flex gap-2 relative mb-4">
  <input
    type="search"
    id="searchProducts"
    placeholder="Search in wishlist..."
    value="<%= searchQuery || '' %>"
    class="border border-gray-300 rounded-lg p-2 w-full focus:ring-green-600 focus:border-green-600"
    autocomplete="off"
  />
  <button
    id="searchBtn"
    class="px-4 py-2 bg-green-600 text-white rounded-lg"
    onclick="performSearch()"
  >
    Search
  </button>
</div>

  <ul id="searchResults" class="absolute bg-white border rounded w-full mt-1 z-50 hidden"></ul>
  
</div>
						</form>
					</div>
					<div class="lg:w-1/5 hidden lg:block">
						<!-- Button trigger modal -->
					
					</div>
					<div class="lg:w-1/5 text-end md:w-1/2 w-3/5">
						<div class="flex gap-7 items-center justify-end">
							<!-- <div>
								<a href="shop-wishlist.html" class="relative">
									<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-heart" width="24"
										height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"
										stroke-linecap="round" stroke-linejoin="round">
										<path stroke="none" d="M0 0h24v24H0z" fill="none" />
										<path d="M19.5 12.572l-7.5 7.428l-7.5 -7.428a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572" />
									</svg>
									<span
										class="absolute top-0 -mt-1 left-full rounded-full h-5 w-5 -ml-2 bg-green-600 text-white text-center font-semibold text-sm">
										5
										<span class="invisible">unread messages</span>
									</span>
								</a>
							</div> -->
							
<!-- <div>
  <a href="/signin" class="text-gray-600">
    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="22"
      height="22" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"
      stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0" />
      <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
    </svg>
  </a>
</div> -->





<!-- <div class="relative flex items-center gap-2">
  <div class="relative"> -->
    <!-- User button / SVG -->
   <!-- <a href="<%= user ? 'javascript:void(0)' : '/signin' %>" id="userDropdownBtn" class="flex items-center gap-2 text-gray-700 font-medium cursor-pointer">      
  <% if (user && user.firstName) { %>
    <span>Hi, <%= user.firstName %></span>
    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" style="pointer-events: none;">
      <path d="M1.5 5.5l6 6 6-6"/>
    </svg> -->
  <!-- <% } else { %>
    <span>Hi, Guest</span>
    <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" style="pointer-events: none;">
      <path d="M0 0h24v24H0z" stroke="none"/>
      <path d="M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0"/>
      <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"/>
    </svg>
  <% } %>
</a> -->

    <!-- Dropdown menu -->
    <!-- <% if (user) { %>
      <div id="userDropdown" class="hidden absolute right-0 mt-2 w-48 bg-white border rounded shadow-lg z-50">
		 <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" style="pointer-events: none;"></svg>
       <a href="/user/profile" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">
  Account Settings
</a>

        <form id="logoutForm" action="/logout" method="POST">
          <button type="submit" class="w-full text-left px-4 py-2 text-gray-700 hover:bg-gray-100">Logout</button>
        </form>
      </div>
    <% } %>
  </div>
</div> -->

 
<div class="relative flex items-center gap-4">

<a href="/user/wishlist" 
   class="flex items-center gap-2 text-gray-700 font-medium cursor-pointer hover:text-red-600 transition">

  <!-- Wishlist (Heart) SVG Icon -->
  <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" 
       fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
    <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
    <path d="M19.5 12.572l-7.5 7.428l-7.5-7.428a5 5 0 1 1 7.5-6.566a5 5 0 1 1 7.5 6.572"/>
  </svg>

  <!-- Optional Label -->
  <!-- <span>Wishlist</span> -->
</a>


  
  <!-- My Cards Button -->

 <a href="/user/card" 
     class="flex items-center gap-2 text-gray-700 font-medium cursor-pointer hover:text-blue-600 transition">
    
    <!-- Card SVG Icon -->
    <!-- <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <rect x="2" y="5" width="20" height="14" rx="2" />
      <line x1="2" y1="10" x2="22" y2="10" />
      <line x1="6" y1="15" x2="6.01" y2="15" />
      <line x1="10" y1="15" x2="14" y2="15" />
    </svg> -->
<svg fill="#000000" width="24" height="24" viewBox="0 0 24 24" id="cart" data-name="Line Color" xmlns="http://www.w3.org/2000/svg" class="icon line-color"><path id="secondary-upstroke" d="M11,20.5h.1m5.9,0h.1" style="fill: none; stroke: rgb(44, 169, 188); stroke-linecap: round; stroke-linejoin: round; stroke-width: 2;"></path><path id="primary" d="M3,3H5.14a1,1,0,0,1,1,.85L6.62,7,8,16l11-1,2-8H6.62" style="fill: none; stroke: rgb(0, 0, 0); stroke-linecap: round; stroke-linejoin: round; stroke-width: 2;"></path></svg>
 
    <!-- <span>My Cards</span> -->
  </a>


  <!-- User Menu -->
  <div class="relative">
    <!-- User button -->
    <a href="<%= user ? 'javascript:void(0)' : '/signin' %>" 
       id="userDropdownBtn" 
       class="flex items-center gap-2 text-gray-700 font-medium cursor-pointer hover:text-blue-600 transition">

      <% if (user && user.firstName) { %>
        <span><%= user.firstName %></span>
        <!-- Dropdown Arrow -->
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" style="pointer-events: none;">
          <path d="M1.5 5.5l6 6 6-6"/>
        </svg>
      <% } else { %>
        <span></span>
        <!-- User Icon -->
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" style="pointer-events: none;">
          <path d="M0 0h24v24H0z" stroke="none"/>
          <path d="M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0"/>
          <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"/>
        </svg>
      <% } %>
    </a>

    <!-- Dropdown menu -->
    <% if (user) { %>
      <div id="userDropdown" class="hidden absolute right-0 mt-2 w-48 bg-white border rounded shadow-lg z-50">
        <a href="/user/profile" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">
          Account Settings
        </a>
        <form id="logoutForm" action="/logout" method="POST">
          <button type="submit" class="w-full text-left px-4 py-2 text-gray-700 hover:bg-gray-100">
            Logout
          </button>
        </form>
      </div>
    <% } %>
  </div>
</div>







<!--  -->







							<!-- <div>
								<button type="button" class="text-gray-600 relative" data-bs-toggle="offcanvas"
									data-bs-target="#offcanvasRight" role="button" aria-controls="offcanvasRight">
									<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-shopping-bag" width="24"
										height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"
										stroke-linecap="round" stroke-linejoin="round">
										<path stroke="none" d="M0 0h24v24H0z" fill="none" />
										<path
											d="M6.331 8h11.339a2 2 0 0 1 1.977 2.304l-1.255 8.152a3 3 0 0 1 -2.966 2.544h-6.852a3 3 0 0 1 -2.965 -2.544l-1.255 -8.152a2 2 0 0 1 1.977 -2.304z" />
										<path d="M9 11v-5a3 3 0 0 1 6 0v5" />
									</svg>
									<span id="cartCount"
										class="absolute top-0 -mt-1 left-full rounded-full h-5 w-5 -ml-3 bg-green-600 text-white text-center font-semibold text-sm">
										0
										<span class="invisible">unread messages</span>
									</span>
								</button>
							</div> -->
							<!-- <div class="lg:hidden leading-none"> -->
								<!-- Button -->
								<!-- <button class="collapsed" type="button" data-bs-toggle="offcanvas" data-bs-target="#navbar-default"
									aria-controls="navbar-default" aria-label="Toggle navigation">
									<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-menu-2 text-gray-800"
										width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none"
										stroke-linecap="round" stroke-linejoin="round">
										<path stroke="none" d="M0 0h24v24H0z" fill="none" />
										<path d="M4 6l16 0" />
										<path d="M4 12l16 0" />
										<path d="M4 18l16 0" />
									</svg>
								</button> -->
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<nav
			class="navbar relative navbar-expand-lg lg:flex lg:flex-wrap items-center content-between text-black navbar-default"
			aria-label="Offcanvas navbar large">
			<div class="container max-w-7xl mx-auto w-full xl:px-4 lg:px-0">
				<div class="offcanvas offcanvas-left lg:visible" tabindex="-1" id="navbar-default">
					<div class="offcanvas-header pb-1">
						<a href="index.html"><img src="../assets/images/logo/freshcart-logo.svg"
								alt="TailwindCSS eCommerce HTML Template" /></a>
						<button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close">
							<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-x text-gray-700" width="24"
								height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"
								stroke-linecap="round" stroke-linejoin="round">
								<path stroke="none" d="M0 0h24v24H0z" fill="none" />
								<path d="M18 6l-12 12" />
								<path d="M6 6l12 12" />
							</svg>
						</button>
					</div>
					<div class="offcanvas-body lg:flex lg:items-center">
						<div class="block lg:hidden mb-4">
							<form action="#">
								<div class="relative">
									<label for="searhNavbar" class="invisible hidden">Search</label>
									<input
										class="border border-gray-300 text-gray-900 rounded-lg focus:shadow-[0_0_0_.25rem_rgba(10,173,10,.25)] focus:ring-green-600 focus:ring-0 focus:border-green-600 block p-2 px-3 disabled:opacity-50 disabled:pointer-events-none w-full text-base"
										type="search" placeholder="Search for products" id="searhNavbar" />
									<button class="absolute right-0 top-0 p-3" type="button">
										<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="16"
											height="16" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"
											stroke-linecap="round" stroke-linejoin="round">
											<path stroke="none" d="M0 0h24v24H0z" fill="none" />
											<path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0" />
											<path d="M21 21l-6 -6" />
										</svg>
									</button>
								</div>
							</form>
						</div>
					
						</div>



						<div class="dropdown hidden lg:block">
							<button
								class="mr-4 btn inline-flex items-center gap-x-2 bg-green-600 text-white border-green-600 disabled:opacity-50 disabled:pointer-events-none hover:text-white hover:bg-green-700 hover:border-green-700 active:bg-green-700 active:border-green-700 focus:outline-none focus:ring-4 focus:ring-green-300"
								type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
								<span>
									<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-layout-grid" width="16"
										height="16" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"
										stroke-linecap="round" stroke-linejoin="round">
										<path stroke="none" d="M0 0h24v24H0z" fill="none" />
										<path d="M4 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z" />
										<path d="M14 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z" />
										<path d="M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z" />
										<path d="M14 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z" />
									</svg>
								</span>
								All Departments
							</button>
							<ul class="dropdown-menu">
						</div>
						<div>
							<ul class="navbar-nav lg:flex gap-3 lg:items-center">
															<li class="nav-item w-full lg:w-auto">
  <a class="nav-link" href="/">Home</a>
</li>

								<li class="nav-item w-full lg:w-auto">
  <a class="nav-link" href="/shop">Shop</a>
</li>


								<li class="nav-item dropdown w-full lg:w-auto dropdown-fullwidth">
									<div class="dropdown-menu pb-0">
										<div class="flex flex-wrap lg:flex-nowrap p-2 lg:p-6 gap-x-6">
											<div class="lg:w-1/4 w-full mb-4">
										
											</div>

									
											<div class="lg:w-1/4 w-full mb-4">
												<div class="card border-0">
													<img src="../assets/images/banner/menu-banner.jpg"
														alt="TailwindCSS eCommerce HTML Template" />
													<div class="absolute pl-6 mt-8">
														<h5>
															Dont miss this
															<br />
															offer today.
														</h5>
														<a href="#"
															class="btn inline-flex items-center gap-x-2 bg-green-600 text-white border-green-600 disabled:opacity-50 disabled:pointer-events-none hover:text-white hover:bg-green-700 hover:border-green-700 active:bg-green-700 active:border-green-700 focus:outline-none focus:ring-4 focus:ring-green-300 btn-sm mt-3">
															Shop Now
														</a>
													</div>
												</div>
											</div>
										</div>
									</div>
								</li>

								<li class="nav-item dropdown w-full lg:w-auto dropdown-flyout">
									<div class="dropdown-menu dropdown-menu-lg lg:right-0 xl:right-auto">
										<a class="dropdown-item items-start" href="docs/index.html">
											<div>
												<svg xmlns="http://www.w3.org/2000/svg"
													class="icon icon-tabler icon-tabler-file-text text-green-500" width="24" height="24"
													viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round"
													stroke-linejoin="round">
													<path stroke="none" d="M0 0h24v24H0z" fill="none" />
													<path d="M14 3v4a1 1 0 0 0 1 1h4" />
													<path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z" />
													<path d="M9 9l1 0" />
													<path d="M9 13l6 0" />
													<path d="M9 17l6 0" />
												</svg>
											</div>
											<div class="ml-3 leading-none">
												<h6 class="mb-1">Documentations</h6>
												<p class="text-sm">Browse the all documentation</p>
											</div>
										</a>
										<a class="dropdown-item items-start" href="docs/changelog.html">
											<div>
												<svg xmlns="http://www.w3.org/2000/svg"
													class="icon icon-tabler icon-tabler-box-multiple text-green-500" width="24" height="24"
													viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round"
													stroke-linejoin="round">
													<path stroke="none" d="M0 0h24v24H0z" fill="none" />
													<path d="M7 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z" />
													<path d="M17 17v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-10a2 2 0 0 1 2 -2h2" />
												</svg>
											</div>
											<div class="ml-3 leading-none">
												<h6 class="mb-1">
													Changelog
													<span class="text-green-600 ml-1">v1.4.0</span>
												</h6>
												<p class="text-sm">See what's new</p>
											</div>
										</a>
									</div>
								</li>
							</ul>
						</div>
						       <div class="flex flex-wrap mt-8">
  <div class="w-full">
    <!-- breadcrumb -->
    <nav aria-label="breadcrumb">
      <ol class="flex flex-wrap">
        <li class="inline-block text-green-600 mr-2">
          <a href="/">
            Home
            <svg xmlns="http://www.w3.org/2000/svg"
              class="icon icon-tabler icon-tabler-chevron-right inline-block"
              width="14" height="14" viewBox="0 0 24 24"
              stroke-width="2" stroke="currentColor" fill="none"
              stroke-linecap="round" stroke-linejoin="round">
              <path stroke="none" d="M0 0h24v24H0z" fill="none" />
              <path d="M9 6l6 6l-6 6" />
            </svg>
          </a>
        </li>

        <li class="inline-block text-green-600 mr-2">
          <a href="/shop">
            Shop
            <svg xmlns="http://www.w3.org/2000/svg"
              class="icon icon-tabler icon-tabler-chevron-right inline-block"
              width="14" height="14" viewBox="0 0 24 24"
              stroke-width="2" stroke="currentColor" fill="none"
              stroke-linecap="round" stroke-linejoin="round">
              <path stroke="none" d="M0 0h24v24H0z" fill="none" />
              <path d="M9 6l6 6l-6 6" />
            </svg>
          </a>
        </li>

        <li class="inline-block text-green-600 mr-2">
          <a href="#!">
            Product Detail
            <!-- same chevron style -->
            <svg xmlns="http://www.w3.org/2000/svg"
              class="icon icon-tabler icon-tabler-chevron-right inline-block"
              width="14" height="14" viewBox="0 0 24 24"
              stroke-width="2" stroke="currentColor" fill="none"
              stroke-linecap="round" stroke-linejoin="round">
              <path stroke="none" d="M0 0h24v24H0z" fill="none" />
              <path d="M9 6l6 6l-6 6" />
            </svg>
          </a>
        </li>

        <!-- Optional: If you want final active page (without link) -->
        <!--
        <li class="inline-block text-gray-500 active" aria-current="page">
          Product Detail
        </li>
        -->
      </ol>
    </nav>
  </div>
</div>
					</div>
					
				</div>
				
			</div>
			
		</nav>
	</div>
</header>



<!-- Shop Cart -->

<div class="offcanvas offcanvas-right" tabindex="-1" id="offcanvasRight" aria-labelledby="offcanvasRightLabel">
	<div class="offcanvas-header border-b">
		<div>
			<h5 id="offcanvasRightLabel">Shop Cart</h5>
			<span>Location in 382480</span>
		</div>
		<button type="button" class="btn-close text-inherit" data-bs-dismiss="offcanvas" aria-label="Close">
			<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-x text-gray-700" width="24"
				height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round"
				stroke-linejoin="round">
				<path stroke="none" d="M0 0h24v24H0z" fill="none" />
				<path d="M18 6l-12 12" />
				<path d="M6 6l12 12" />
			</svg>
		</button>
	</div>
	<div class="offcanvas-body p-4">
		<div>
			<!-- alert -->
			<div class="bg-red-500 bg-opacity-25 text-red-800 mb-3 rounded-lg p-4" role="alert">
				You‚Äôve got FREE delivery. Start
				<a href="#!" class="alert-link">checkout now!</a>
			</div>
			<ul class="list-none">
				<!-- list group -->
				<li class="py-3 border-t">
					<div class="flex items-center">
						<div class="w-1/2 md:w-1/2 lg:w-3/5">
							<div class="flex">
								<img src="assets/images/products/product-img-1.jpg" alt="Ecommerce" class="w-16 h-16" />
								<div class="ml-3">
									<!-- title -->
									<a href="shop-single.html" class="text-inherit">
										<h6>Haldiram's Sev Bhujia</h6>
									</a>
									<span><small class="text-gray-500">.98 / lb</small></span>
									<!-- text -->
									<div class="mt-2 small leading-none">
										<a href="#!" class="text-green-600 flex items-center">
											<span class="mr-1 align-text-bottom">
												<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-trash" width="14"
													height="14" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"
													stroke-linecap="round" stroke-linejoin="round">
													<path stroke="none" d="M0 0h24v24H0z" fill="none" />
													<path d="M4 7l16 0" />
													<path d="M10 11l0 6" />
													<path d="M14 11l0 6" />
													<path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" />
													<path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" />
												</svg>
											</span>
											<span class="text-gray-500 text-sm">Remove</span>
										</a>
									</div>
								</div>
							</div>
						</div>
						<!-- input group -->
						<div class="w-1/3 md:w-1/4 lg:w-1/5">
							<!-- input -->
							<div class="input-group input-spinner rounded-lg flex justify-between items-center">
								<input type="button" value="-" class="button-minus w-8 py-1 border-r cursor-pointer border-gray-300"
									data-field="quantity" />
								<input type="number" step="1" max="10" value="1" name="quantity"
									class="quantity-field w-9 px-2 text-center h-7 border-0 bg-transparent" />
								<input type="button" value="+" class="button-plus w-8 py-1 border-l cursor-pointer border-gray-300"
									data-field="quantity" />
							</div>
						</div>
						<!-- price -->
						<div class="w-1/5 text-center md:w-1/5">
							<span class="font-bold text-gray-800">$5.00</span>
						</div>
					</div>
				</li>
				<!-- list group -->
				<li class="py-3 border-t">
					<div class="flex items-center">
						<div class="w-1/2 md:w-1/2 lg:w-3/5">
							<div class="flex">
								<img src="assets/images/products/product-img-2.jpg" alt="Ecommerce" class="w-16 h-16" />
								<div class="ml-3">
									<a href="shop-single.html" class="text-inherit">
										<h6>NutriChoice Digestive</h6>
									</a>
									<span><small class="text-gray-500">250g</small></span>
									<!-- text -->
									<div class="mt-2 small leading-none">
										<a href="#!" class="text-green-600 flex items-center">
											<span class="mr-1 align-text-bottom">
												<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-trash" width="14"
													height="14" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"
													stroke-linecap="round" stroke-linejoin="round">
													<path stroke="none" d="M0 0h24v24H0z" fill="none" />
													<path d="M4 7l16 0" />
													<path d="M10 11l0 6" />
													<path d="M14 11l0 6" />
													<path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" />
													<path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" />
												</svg>
											</span>
											<span class="text-gray-500 text-sm">Remove</span>
										</a>
									</div>
								</div>
							</div>
						</div>

						<!-- input group -->
						<div class="w-1/3 md:w-1/4 lg:w-1/5">
							<!-- input -->
							<div class="input-group input-spinner rounded-lg flex justify-between items-center">
								<input type="button" value="-" class="button-minus w-8 py-1 border-r cursor-pointer border-gray-300"
									data-field="quantity" />
								<input type="number" step="1" max="10" value="1" name="quantity"
									class="quantity-field w-9 px-2 text-center h-7 border-0 bg-transparent" />
								<input type="button" value="+" class="button-plus w-8 py-1 border-l cursor-pointer border-gray-300"
									data-field="quantity" />
							</div>
						</div>
						<!-- price -->
						<div class="w-1/5 text-center md:w-1/5">
							<span class="font-bold text-red-600">$20.00</span>
							<div class="line-through text-gray-500 small">$26.00</div>
						</div>
					</div>
				</li>
				<!-- list group -->
				<li class="py-3 border-t">
					<div class="flex items-center">
						<div class="w-1/2 md:w-1/2 lg:w-3/5">
							<div class="flex">
								<img src="assets/images/products/product-img-3.jpg" alt="Ecommerce" class="w-16 h-16" />
								<div class="ml-3">
									<!-- title -->
									<a href="shop-single.html" class="text-inherit">
										<h6>Cadbury 5 Star Chocolate</h6>
									</a>
									<span><small class="text-gray-500">1 kg</small></span>
									<!-- text -->
									<div class="mt-2 small leading-none">
										<a href="#!" class="text-green-600 flex items-center">
											<span class="mr-1 align-text-bottom">
												<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-trash" width="14"
													height="14" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"
													stroke-linecap="round" stroke-linejoin="round">
													<path stroke="none" d="M0 0h24v24H0z" fill="none" />
													<path d="M4 7l16 0" />
													<path d="M10 11l0 6" />
													<path d="M14 11l0 6" />
													<path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" />
													<path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" />
												</svg>
											</span>
											<span class="text-gray-500 text-sm">Remove</span>
										</a>
									</div>
								</div>
							</div>
						</div>

						<!-- input group -->
						<div class="w-1/3 md:w-1/4 lg:w-1/5">
							<!-- input -->
							<div class="input-group input-spinner rounded-lg flex justify-between items-center">
								<input type="button" value="-" class="button-minus w-8 py-1 border-r cursor-pointer border-gray-300"
									data-field="quantity" />
								<input type="number" step="1" max="10" value="1" name="quantity"
									class="quantity-field w-9 px-2 text-center h-7 border-0 bg-transparent" />
								<input type="button" value="+" class="button-plus w-8 py-1 border-l cursor-pointer border-gray-300"
									data-field="quantity" />
							</div>
						</div>
						<!-- price -->
						<div class="w-1/5 text-center md:w-1/5">
							<span class="font-bold text-gray-800">$15.00</span>
							<div class="line-through text-gray-500 small">$20.00</div>
						</div>
					</div>
				</li>
				<!-- list group -->
				<li class="py-3 border-t">
					<div class="flex items-center">
						<div class="w-1/2 md:w-1/2 lg:w-3/5">
							<div class="flex">
								<img src="assets/images/products/product-img-4.jpg" alt="Ecommerce" class="w-16 h-16" />
								<div class="ml-3">
									<!-- title -->
									<!-- title -->
									<a href="shop-single.html" class="text-inherit">
										<h6>Onion Flavour Potato</h6>
									</a>
									<span><small class="text-gray-500">250g</small></span>
									<!-- text -->
									<div class="mt-2 small leading-none">
										<a href="#!" class="text-green-600 flex items-center">
											<span class="mr-1 align-text-bottom">
												<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-trash" width="14"
													height="14" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"
													stroke-linecap="round" stroke-linejoin="round">
													<path stroke="none" d="M0 0h24v24H0z" fill="none" />
													<path d="M4 7l16 0" />
													<path d="M10 11l0 6" />
													<path d="M14 11l0 6" />
													<path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" />
													<path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" />
												</svg>
											</span>
											<span class="text-gray-500 text-sm">Remove</span>
										</a>
									</div>
								</div>
							</div>
						</div>

						<!-- input group -->
						<div class="w-1/3 md:w-1/4 lg:w-1/5">
							<!-- input -->
							<div class="input-group input-spinner rounded-lg flex justify-between items-center">
								<input type="button" value="-" class="button-minus w-8 py-1 border-r cursor-pointer border-gray-300"
									data-field="quantity" />
								<input type="number" step="1" max="10" value="1" name="quantity"
									class="quantity-field w-9 px-2 text-center h-7 border-0 bg-transparent" />
								<input type="button" value="+" class="button-plus w-8 py-1 border-l cursor-pointer border-gray-300"
									data-field="quantity" />
							</div>
						</div>
						<!-- price -->
						<div class="w-1/5 text-center md:w-1/5">
							<span class="font-bold text-gray-800">$15.00</span>
							<div class="line-through text-gray-500 small">$20.00</div>
						</div>
					</div>
				</li>
				<!-- list group -->
				<li class="py-3 border-t border-b">
					<div class="flex items-center">
						<div class="w-1/2 md:w-1/2 lg:w-3/5">
							<div class="flex">
								<img src="assets/images/products/product-img-5.jpg" alt="Ecommerce" class="w-16 h-16" />
								<div class="ml-3">
									<!-- title -->
									<a href="shop-single.html" class="text-inherit">
										<h6>Salted Instant Popcorn</h6>
									</a>
									<span><small class="text-gray-500">100g</small></span>
									<!-- text -->
									<div class="mt-2 small leading-none">
										<a href="#!" class="text-green-600 flex items-center">
											<span class="mr-1 align-text-bottom">
												<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-trash" width="14"
													height="14" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none"
													stroke-linecap="round" stroke-linejoin="round">
													<path stroke="none" d="M0 0h24v24H0z" fill="none" />
													<path d="M4 7l16 0" />
													<path d="M10 11l0 6" />
													<path d="M14 11l0 6" />
													<path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" />
													<path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" />
												</svg>
											</span>
											<span class="text-gray-500 text-sm">Remove</span>
										</a>
									</div>
								</div>
							</div>
						</div>

						<!-- input group -->
						<div class="w-1/3 md:w-1/4 lg:w-1/5">
							<!-- input -->
							<div class="input-group input-spinner rounded-lg flex justify-between items-center">
								<input type="button" value="-" class="button-minus w-8 py-1 border-r cursor-pointer border-gray-300"
									data-field="quantity" />
								<input type="number" step="1" max="10" value="1" name="quantity"
									class="quantity-field w-9 px-2 text-center h-7 border-0 bg-transparent" />
								<input type="button" value="+" class="button-plus w-8 py-1 border-l cursor-pointer border-gray-300"
									data-field="quantity" />
							</div>
						</div>
						<!-- price -->
						<div class="w-1/5 text-center md:w-1/5">
							<span class="font-bold text-gray-800">$15.00</span>
							<div class="line-through text-gray-500 small">$25.00</div>
						</div>
					</div>
				</li>
			</ul>
			<!-- btn -->
			<div class="flex justify-between mt-4">
				<a href="#!"
					class="btn inline-flex items-center gap-x-2 bg-green-600 text-white border-green-600 disabled:opacity-50 disabled:pointer-events-none hover:text-white hover:bg-green-700 hover:border-green-700 active:bg-green-700 active:border-green-700 focus:outline-none focus:ring-4 focus:ring-green-300">
					Continue Shopping
				</a>
				<a href="#!"
					class="btn inline-flex items-center gap-x-2 bg-gray-800 text-white border-gray-800 disabled:opacity-50 disabled:pointer-events-none hover:text-white hover:bg-gray-900 hover:border-gray-900 active:bg-gray-900 active:border-gray-900 focus:outline-none focus:ring-4 focus:ring-gray-300">
					Update Cart
				</a>
			</div>
		</div>
	</div>
</div>
	
    <div class="container py-2">
      

      <% if (!wishlistObj || wishlistObj.length === 0) { %>
        <!-- Empty Wishlist Card -->
        <div class="card shadow-sm text-center p-5 border-0">
          <div class="card-body">
            <div class="mb-3">
              <i class="bi bi-heart text-danger" style="font-size: 3rem;"></i>
            </div>
            <h3 class="fw-semibold mb-2">Your wishlist is empty ü•∫</h3>
            <p class="text-muted mb-4">
              Save items you love to your wishlist and shop later!
            </p>
            <a href="/shop" class="btn btn-primary px-4 py-2">
              Browse Products
            </a>
          </div>
        </div>
      <% } else { %>
<!-- Wishlist Table -->
<div class="card shadow border-0">
  <div class="card-body p-4">
    <div class="table-responsive">
      <table class="table align-middle text-center">
        <thead class="table-light">
          <tr>
            <th>Image</th>
            <th>Product</th>
            <th>Size</th>
            <th>Price</th>
            <th>Qty</th>
            <th>Action</th>
            <th>Remove</th>
          </tr>
        </thead>
        <tbody>
          <% if (wishlistObj && wishlistObj.length > 0) { %>
            <% wishlistObj.forEach((item) => { %>
              <tr>
                <!-- ‚úÖ Product Image (not clickable) -->
                <td>
                  <img
                    src="<%= item.productPic %>"
                    onerror="this.onerror=null;this.src='/images/no-image.jpg';"
                    alt="<%= item.productName %>"
                    class="wishlist-product-img img-thumbnail"
                    style="width: 80px; height: 80px; object-fit: cover; cursor: default;"
                  />
                </td>

                <!-- ‚úÖ Product Name -->
                <td>
                  <div>
                    <span class="fw-semibold text-dark">
                      <%= item.productName %>
                    </span>
                    <p class="small text-muted mb-0">
                      Product ID: <%= item.productId %>
                    </p>
                  </div>
                </td>

                <!-- ‚úÖ Size -->
                <td>
                  <% if (item.productVariety !== 'items') { %>
                    <span class="badge bg-secondary"><%= item.productVariety %></span>
                  <% } else { %>
                    <span class="text-muted">‚Äî</span>
                  <% } %>
                </td>

                <!-- ‚úÖ Price -->
                <td class="fw-semibold">
                  ‚Çπ<%= item.productPrice.toLocaleString() %>
                </td>

                <!-- ‚úÖ Quantity -->
                <td>
                  <%= item.varietyMeasurement ? 1 : (item.variety?.quantity || 1) %>
                </td>

                <!-- ‚úÖ Action Buttons -->
                <td>
  <div class="d-flex align-items-center justify-content-center gap-2">
  
<%
  const pid = item.productId?._id || item.productId;
  const size = item.productVariety || (item.sizes && item.sizes[0]) || 'Default';
%>

<!-- <button
  class="btn btn-success btn-sm move-to-cart-btn"
  onclick="moveToCart('<%= pid %>', '<%= size %>', 1)">
  <i class="bi bi-cart-plus me-1"></i> Move to Cart
</button> -->
<button
  class="btn btn-success btn-sm move-to-cart-btn"
  onclick="moveToCart('<%= item.productId %>', '<%= item.productVariety %>', 1)">
  <i class="bi bi-cart-plus me-1"></i> Move to Cart
</button>



    <a
      href="/product/<%= item.productId %>"
      class="btn btn-outline-primary btn-sm"
    >
      <i class="bi bi-eye me-1"></i> View Product
    </a>
  </div>
</td>


                <!-- ‚úÖ Remove Button -->
                <td>
                  <button
                    class="btn btn-danger btn-sm delete-wishlist-btn"
                    onclick="deleteWishlist('<%= item.productId %>', '<%= item.productVariety %>')"
                    title="Delete Item"
                  >
                    <i class="bi bi-trash me-1"></i> Delete
                  </button>
                </td>
              </tr>
            <% }) %>
          <% } else { %>
            <tr>
              <td colspan="7" class="py-5">
                <h5 class="text-muted">Your wishlist is empty ü•∫</h5>
                <a href="/shop" class="btn btn-primary mt-2">Browse Products</a>
              </td>
            </tr>
          <% } %>
        </tbody>
      </table>
    </div>
  </div>
</div>


      <% } %>
    </div>
<!-- ‚úÖ Pagination Controls -->
<% if (totalPages > 1) { %>
  <nav aria-label="Wishlist pagination">
    <ul class="pagination justify-content-center mt-4">
      <li class="page-item <%= currentPage === 1 ? 'disabled' : '' %>">
        <a class="page-link" href="?page=<%= currentPage - 1 %>">Previous</a>
      </li>

      <% for (let i = 1; i <= totalPages; i++) { %>
        <li class="page-item <%= currentPage === i ? 'active' : '' %>">
          <a class="page-link" href="?page=<%= i %>"><%= i %></a>
        </li>
      <% } %>

      <li class="page-item <%= currentPage === totalPages ? 'disabled' : '' %>">
        <a class="page-link" href="?page=<%= currentPage + 1 %>">Next</a>
      </li>
    </ul>
  </nav>
<% } %>

    <!-- ‚úÖ Bootstrap 5 JS + Icons -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
    />


<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>


<script>
	
</script>


<script>



  // async function moveToCart(productId, size, qty) {
  //   console.log("üßæ MoveToCart Clicked:", { productId, size, qty });

  //   if (!productId || productId === "undefined" || productId.trim() === "") {
  //     alert("Product ID missing or invalid!");
  //     return;
  //   }

  //   try {
  //     const response = await fetch("/user/move-to-cart", {
  //       method: "POST",
  //       headers: { "Content-Type": "application/json" },
  //       body: JSON.stringify({ productId, size, qty }),
  //     });

  //     const data = await response.json();
  //     console.log("üõí MoveToCart Response:", data);

  //     if (data.success) {
  //       // Redirect to cart page
  //       window.location.href = data.redirectUrl;
  //     } else {
  //       alert(data.message || "Failed to move to cart");
  //     }
  //   } catch (err) {
  //     console.error("MoveToCart Error:", err);
  //     alert("Something went wrong while moving to cart!");
  //   }
  // }



 async function moveToCart(productId, size, qty) {
    try {
      const response = await fetch("/user/move-to-cart", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ productId, size, qty })
      });

      const data = await response.json();

      if (data.success) {
        // ‚úÖ Show SweetAlert success popup
        Swal.fire({
          icon: "success",
          title: "Moved to Cart!",
          text: data.message || "Your item has been added to your cart successfully.",
          showConfirmButton: false,
          timer: 1800
        });

        // ‚úÖ Redirect to /user/card after small delay
        setTimeout(() => {
          window.location.href = data.redirectUrl || "/user/card";
        }, 1800);

      } else {
        // ‚ùå Show SweetAlert error popup
        Swal.fire({
          icon: "error",
          title: "Oops!",
          text: data.message || "Something went wrong, please try again."
        });
      }

    } catch (error) {
      console.error("MoveToCart Error:", error);
      Swal.fire({
        icon: "error",
        title: "Server Error!",
        text: "Unable to move item to cart right now."
      });
    }
  }



document.addEventListener("DOMContentLoaded", () => {

  // =========================
  // Dropdown toggle & click outside to close (only if logged in)
  // =========================
  const btn = document.getElementById("userDropdownBtn");
  const dropdown = document.getElementById("userDropdown");

  if(btn && dropdown) {
    // Toggle dropdown on button click
    btn.addEventListener("click", (e) => {
      e.stopPropagation();
      dropdown.classList.toggle("hidden");
    });

    // Close dropdown on clicking outside
    window.addEventListener("click", (e) => {
      if(!btn.contains(e.target) && !dropdown.contains(e.target)){
        dropdown.classList.add("hidden");
      }
    });
  }

  // =========================
  // Logout SweetAlert confirmation
  // =========================
  const logoutForm = document.getElementById("logoutForm");
  if(logoutForm){
    logoutForm.addEventListener("submit", function(e) {
      e.preventDefault();
      Swal.fire({
        title: 'Are you sure?',
        text: "You will be logged out!",
        icon: 'warning',
        showCancelButton: true,
        confirmButtonColor: '#3085d6',
        cancelButtonColor: '#d33',
        confirmButtonText: 'Yes, logout!'
      }).then((result) => {
        if (result.isConfirmed) {
          logoutForm.submit();
        }
      });
    });
  }

  // =========================
  // Login form with SweetAlert & POST
  // =========================
  const loginForm = document.getElementById("loginForm");
  if(loginForm){
    loginForm.addEventListener("submit", async (e) => {
      e.preventDefault();

      const email = document.getElementById("email").value.trim();
      const password = document.getElementById("password").value.trim();

      if (!email || !password) {
        Swal.fire({ 
          icon: "warning", 
          title: "Oops!", 
          text: "Please enter email and password" 
        });
        return;
      }

      try {
        const res = await fetch("/signin", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ email, password })
        });

        const result = await res.json();

        if (result.success) {
          // Email verification check
          if (!result.user.isVerified) {
            Swal.fire({
              icon: "warning",
              title: "Email Not Verified",
              text: "Please verify your email first."
            });
            return;
          }

          // Blocked user check
          if (result.user.isBlocked) {
            Swal.fire({
              icon: "error",
              title: "Account Blocked",
              text: "Your account is blocked. Contact support."
            });
            return;
          }

          // Correct login -> show success & reload page
          Swal.fire({
            icon: "success",
            title: "Login Successful üéâ",
            text: `Welcome ${result.user.name.split(' ')[0]}!`, // First name only
            confirmButtonColor: "#16a34a"
          }).then(() => {
            window.location.reload(); // reload page to show dropdown with username
          });

        } else {
          Swal.fire({ 
            icon: "error", 
            title: "Login Failed ‚ùå", 
            text: result.message 
          });
        }

      } catch (err) {
        Swal.fire({ 
          icon: "error", 
          title: "Server Error", 
          text: "Try again later" 
        });
      }
    });
  }

});







  async function deleteWishlist(productId, size) {
    const confirmDelete = await Swal.fire({
      title: "Are you sure?",
      text: "You won't be able to recover this item!",
      icon: "warning",
      showCancelButton: true,
      confirmButtonColor: "#d33",
      cancelButtonColor: "#3085d6",
      confirmButtonText: "Yes, delete it!",
      cancelButtonText: "Cancel",
    });

    if (!confirmDelete.isConfirmed) return;

    try {
      const response = await fetch("/wishlist/delete", {
        method: "DELETE",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ productId, variety: size }),
      });

      const data = await response.json();

      if (data.success) {
        Swal.fire({
          title: "Deleted!",
          text: data.message,
          icon: "success",
          showConfirmButton: false,
          timer: 1500,
        });

        // üß† Smooth fade-out instead of page reload
        const row = document.querySelector(`[data-product-id="${productId}"][data-size="${size}"]`);
        if (row) {
          row.style.transition = "opacity 0.5s";
          row.style.opacity = "0";
          setTimeout(() => row.remove(), 600);
        }

        // Optional reload after short delay (if needed)
        setTimeout(() => location.reload(), 1600);
      } else {
        Swal.fire({
          title: "Oops!",
          text: data.message,
          icon: "error",
        });
      }
    } catch (error) {
      console.error("Delete wishlist error:", error);
      Swal.fire({
        title: "Error!",
        text: "Something went wrong while deleting.",
        icon: "error",
      });
    }
  }




    function performSearch() {
    const query = document.getElementById("searchProducts").value.trim();
    window.location.href = `?search=${encodeURIComponent(query)}&page=1`;
  }

  // Optional: Trigger search on Enter key
  document
    .getElementById("searchProducts")
    .addEventListener("keypress", function (e) {
      if (e.key === "Enter") performSearch();
    });
</script>


  </body>
</html>
