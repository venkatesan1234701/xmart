<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Add Address</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- SweetAlert2 -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body class="bg-light">

<!-- <div class="container">
  <div class="max-w-lg mx-auto mt-5 bg-white p-5 rounded shadow-sm">
    <h1 class="text-center mb-4">Add New Address</h1>

    <% if (error) { %>
      <p class="text-danger text-center mb-3"><%= error %></p>
    <% } %>

    <form id="addressForm" action="/user/add-address" method="POST" class="needs-validation" novalidate>
      <div class="mb-3">
        <label for="firstName" class="form-label">First Name</label>
        <input type="text" class="form-control" id="firstName" name="firstName" required>
        <div class="invalid-feedback">Enter First Name</div>
      </div>

      <div class="mb-3">
        <label for="addressType" class="form-label">Address Type</label>
        <select class="form-select" id="addressType" name="addressType" required>
          <option value="">Select Address Type</option>
          <option value="Home">Home</option>
          <option value="Work">Work</option>
          <option value="Other">Other</option>
        </select>
        <div class="invalid-feedback">Select Address Type</div>
      </div>

      <div class="mb-3">
        <label for="addressLine1" class="form-label">Address Line 1</label>
        <input type="text" class="form-control" id="addressLine1" name="addressLine1" required>
        <div class="invalid-feedback">Enter Address Line 1</div>
      </div>

      <div class="mb-3">
        <label for="addressLine2" class="form-label">Address Line 2</label>
        <input type="text" class="form-control" id="addressLine2" name="addressLine2">
      </div>

      <div class="mb-3">
        <label for="city" class="form-label">City</label>
        <input type="text" class="form-control" id="city" name="city" required>
        <div class="invalid-feedback">Enter City</div>
      </div>

      <div class="mb-3">
        <label for="state" class="form-label">State</label>
        <input type="text" class="form-control" id="state" name="state" required>
        <div class="invalid-feedback">Enter State</div>
      </div>

      <div class="mb-3">
        <label for="country" class="form-label">Country</label>
        <input type="text" class="form-control" id="country" name="country" required>
        <div class="invalid-feedback">Enter Country</div>
      </div>

      <div class="mb-3">
        <label for="zipCode" class="form-label">Zip Code</label>
        <input type="text" class="form-control" id="zipCode" name="zipCode" required>
        <div class="invalid-feedback">Enter Zip Code</div>
      </div>

      <button type="submit" class="btn btn-primary w-100">Save Address</button>
    </form>
  </div>
</div> -->




<div class="container py-5 d-flex justify-content-center">
  <div class="col-lg-6 col-md-8 col-sm-10 bg-white p-4 p-md-5 rounded-4 shadow-lg">

    <h2 class="text-center mb-4 fw-bold text-primary">
      <i class="bi bi-geo-alt-fill"></i> Add New Address
    </h2>

    <% if (error) { %>
      <div class="alert alert-danger text-center py-2"><%= error %></div>
    <% } %>

    <form id="addressForm" action="/add-address" method="POST" class="needs-validation" novalidate>

      <!-- First Name -->
      <div class="mb-3">
        <label class="form-label fw-semibold">First Name</label>
        <input type="text" class="form-control form-control-lg" id="firstName" name="firstName" required>
        <div class="invalid-feedback">Enter First Name</div>
      </div>

      <!-- Address Type -->
      <div class="mb-3">
        <label class="form-label fw-semibold">Address Type</label>
        <select class="form-select form-select-lg" id="addressType" name="addressType" required>
          <option value="">Select Address Type</option>
          <option value="Home">üè† Home</option>
          <option value="Work">üíº Work</option>
          <option value="Other">üìç Other</option>
        </select>
        <div class="invalid-feedback">Select Address Type</div>
      </div>

      <!-- Address Line 1 -->
      <div class="mb-3">
        <label class="form-label fw-semibold">Address Line 1</label>
        <input type="text" class="form-control form-control-lg" id="addressLine1" name="addressLine1" required>
        <div class="invalid-feedback">Enter Address Line 1</div>
      </div>

      <!-- Address Line 2 -->
      <div class="mb-3">
        <label class="form-label fw-semibold">Address Line 2</label>
        <input type="text" class="form-control form-control-lg" id="addressLine2" name="addressLine2">
      </div>

      <!-- City & State -->
      <div class="row">
        <div class="col-md-6 mb-3">
          <label class="form-label fw-semibold">City</label>
          <input type="text" class="form-control form-control-lg" id="city" name="city" required>
          <div class="invalid-feedback">Enter City</div>
        </div>

        <div class="col-md-6 mb-3">
          <label class="form-label fw-semibold">State</label>
          <input type="text" class="form-control form-control-lg" id="state" name="state" required>
          <div class="invalid-feedback">Enter State</div>
        </div>
      </div>

      <!-- Country & Zip -->
      <div class="row">
        <div class="col-md-6 mb-3">
          <label class="form-label fw-semibold">Country</label>
          <input type="text" class="form-control form-control-lg" id="country" name="country" required>
          <div class="invalid-feedback">Enter Country</div>
        </div>

        <!-- <div class="col-md-6 mb-3">
          <label class="form-label fw-semibold">Zip Code</label>
          <input type="text" class="form-control form-control-lg" id="zipCode" name="zipCode" required>
          <div class="invalid-feedback">Enter Zip Code</div>
        </div>
      </div> -->
<div class="col-md-6 mb-3">
  <label class="form-label fw-semibold">Zip Code</label>
  <input 
    type="text" 
    class="form-control form-control-lg" 
    id="zipCode" 
    name="zipCode" 
    required
    maxlength="6"
    pattern="^[0-9]{6}$"
    inputmode="numeric"
  >
  <div class="invalid-feedback">Enter a valid 6-digit Zip Code</div>
</div>

      <!-- Submit Button -->
      <button type="submit" class="btn btn-primary btn-lg w-100 mt-2 shadow-sm">
        <i class="bi bi-save2"></i> Save Address
      </button>

         <a href="/profile" class="btn btn-primary btn-lg w-100 mt-2 shadow-sm">
        <i class="bi bi-save2"></i> back
         </a>
    </form>

  </div>
</div>






<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
  // Bootstrap client-side validation
  (function () {
    'use strict'
    const forms = document.querySelectorAll('.needs-validation')
    Array.from(forms).forEach(function (form) {
      form.addEventListener('submit', function (event) {
        if (!form.checkValidity()) {
          event.preventDefault()
          event.stopPropagation()
        }
        form.classList.add('was-validated')
      }, false)
    })
  })()
</script>

<!-- SweetAlert feedback after server response -->
<% if (success) { %>
<script>
  Swal.fire({
    icon: 'success',
    title: 'Address Added!',
    text: '<%= success %>',
    timer: 2000,
    showConfirmButton: false
  }).then(() => {
    window.location.href = '/profile';
  });
</script>
<% } %>

<% if (error) { %>
<script>
  Swal.fire({
    icon: 'error',
    title: 'Oops!',
    text: '<%= error %>'
  });
</script>
<% } %>

</body>
</html>
